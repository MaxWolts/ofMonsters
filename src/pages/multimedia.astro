---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Gallery from "../components/Gallery.astro";

const videos = [
  {
    title: "Little Talks - Official Music Video",
    videoId: "ghb6eDopW8I",
    description: "El video oficial de nuestro hit 'Little Talks'",
  },
  {
    title: "Mountain Sound - Official Music Video",
    videoId: "qt7ox1M_XG4",
    description: "Video musical de 'Mountain Sound' filmado en Islandia",
  },
  {
    title: "Dirty Paws - Official Music Video",
    videoId: "mCHUw7ACS8o",
    description: "El épico video de 'Dirty Paws' con animación",
  },
  {
    title: "King and Lionheart - Official Music Video",
    videoId: "A76a_LNIYwE",
    description: "Video musical de 'King and Lionheart' con toques épicos",
  },
  {
    title: "Crystals - Official Music Video",
    videoId: "_-PgPZ3F9P4",
    description: "El video oficial de 'Crystals' con hermosa cinematografía",
  },
  {
    title: "Wars - Official Music Video",
    videoId: "10cyoQjBlNQ",
    description: "Video musical de 'Wars' capturando la esencia islandesa",
  },
];
---

<Layout>
  <Header />

  <!-- Hero Section with Background Video -->
  <section class="relative py-20 overflow-hidden mt-20 md:mt-16 h-[20rem]">
    <div class="absolute inset-0 z-0 h-[45rem] m-auto">
      <iframe
        width="100%"
        height="100%"
        src="https://www.youtube.com/embed/ghb6eDopW8I?autoplay=1&mute=1&loop=1&playlist=ghb6eDopW8I&controls=0&showinfo=0&rel=0&modestbranding=1"
        title="Background video"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
        class="w-full h-full object-cover"></iframe>
    </div>
    <div class="absolute inset-0 z-10"></div>
    <div
      class="z-20 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white absolute left-1/2 top-1/2 -translate-y-1/2 -translate-x-1/2 w-4/5"
    >
      <h1 class="text-4xl md:text-6xl font-bold mb-6 drop-shadow-2xl">
        Nuestro Viaje: Galería de Videos
      </h1>
      <p class="text-xl md:text-2xl drop-shadow-lg max-w-2xl mx-auto">
        Explora el setlist en movimiento de Of Monsters and Men
      </p>
      <div class="mt-8 flex justify-center">
        <div class="w-32 h-1 bg-white rounded-full opacity-80"></div>
      </div>
    </div>
  </section>

  <!-- Videos Section -->
  <section class="py-16 bg-stone-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-stone-800 mb-4">
          El Setlist en Movimiento
        </h2>
        <p class="text-lg text-stone-600">
          Videos que traen nuestra música a la vida
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {
          videos.map((video) => (
            <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
              <div class="aspect-video">
                <iframe
                  width="100%"
                  height="100%"
                  src={`https://www.youtube.com/embed/${video.videoId}`}
                  title={`${video.title}`}
                  frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                  allowfullscreen
                  loading="lazy"
                  class="w-full h-full"
                />
              </div>
              <div class="p-6">
                <h3 class="text-lg font-bold text-stone-800 mb-2">
                  {video.title}
                </h3>
                <p class="text-stone-600 text-sm">{video.description}</p>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <Gallery />

  <Footer />

  <script>
    // Try to autoplay the hero background video
    window.addEventListener("load", function () {
      setTimeout(function () {
        const heroIframe = document.querySelector(
          'iframe[title="Background video"]'
        ) as HTMLIFrameElement;
        if (heroIframe) {
          const currentSrc = heroIframe.src;
          if (!currentSrc.includes("autoplay=1")) {
            heroIframe.src = currentSrc + "&autoplay=1";
          }
        }
      }, 1000);
    });
  </script>
</Layout>
