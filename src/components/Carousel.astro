---
const slides = [
  {
    image: "/images/hero-1.jpg",
    title: "En los Bosques del Norte",
    description: "Descubre la esencia de nuestra música",
  },
  {
    image: "/images/hero-2.jpg",
    title: "Conciertos Bajo las Estrellas",
    description: "Vive la experiencia en vivo",
  },
  {
    image: "/images/hero-3.webp",
    title: "Arte y Naturaleza",
    description: "La inspiración detrás de nuestras canciones",
  },
  {
    image: "/images/hero-4.webp",
    title: "El Viaje Continúa",
    description: "Nuevos horizontes musicales",
  },
];
---

<div class="relative overflow-hidden bg-stone-900 mt-20 md:mt-16">
  <div id="carousel" class="relative h-96 md:h-[500px] lg:h-[600px]">
    {
      slides.map((slide, index) => (
        <div
          class={`carousel-slide absolute inset-0 transition-opacity duration-1000 ${index === 0 ? "opacity-100" : "opacity-0"}`}
          data-slide={index}
        >
          <img
            src={slide.image}
            alt={slide.title}
            class="w-full h-full object-cover object-center"
            loading="lazy"
            decoding="async"
          />
          <div class="absolute inset-0 bg-black opacity-40" />
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-center text-white px-4 max-w-4xl">
              <h1 class="text-4xl md:text-6xl lg:text-7xl font-bold mb-4 text-shadow">
                {slide.title}
              </h1>
              <p class="text-xl md:text-2xl lg:text-3xl font-light">
                {slide.description}
              </p>
            </div>
          </div>
        </div>
      ))
    }
  </div>

  <!-- Navigation arrows -->
  <button
    id="prev-btn"
    class="absolute left-4 md:left-6 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-40 hover:bg-opacity-60 text-white p-3 md:p-4 rounded-full transition-all duration-300 hover:scale-110 shadow-xl backdrop-blur-sm border border-white border-opacity-20"
    aria-label="Previous slide"
  >
    <svg
      class="w-5 h-5 md:w-6 md:h-6"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M15 19l-7-7 7-7"></path>
    </svg>
  </button>

  <button
    id="next-btn"
    class="absolute right-4 md:right-6 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-40 hover:bg-opacity-60 text-white p-3 md:p-4 rounded-full transition-all duration-300 hover:scale-110 shadow-xl backdrop-blur-sm border border-white border-opacity-20"
    aria-label="Next slide"
  >
    <svg
      class="w-5 h-5 md:w-6 md:h-6"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M9 5l7 7-7 7"></path>
    </svg>
  </button>

  <!-- Indicators -->
  <div
    class="absolute bottom-6 md:bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-3"
  >
    {
      slides.map((_, index) => (
        <button
          class={`carousel-indicator w-4 h-4 md:w-5 md:h-5 rounded-full transition-all duration-300 hover:scale-125 shadow-lg ${index === 0 ? "bg-[#cbb92e] shadow-xl" : "bg-white bg-opacity-40 hover:bg-opacity-70"}`}
          data-slide={index}
          aria-label={`Go to slide ${index + 1}`}
        />
      ))
    }
  </div>
</div>

<script>
  let currentSlide = 0;
  const slides = document.querySelectorAll(".carousel-slide");
  const indicators = document.querySelectorAll(".carousel-indicator");
  const totalSlides = slides.length;

  function showSlide(index: number) {
    slides.forEach((slide, i) => {
      slide.classList.toggle("opacity-100", i === index);
      slide.classList.toggle("opacity-0", i !== index);
    });

    indicators.forEach((indicator, i) => {
      indicator.classList.toggle("bg-[#cbb92e]", i === index);
      indicator.classList.toggle("bg-white", i !== index);
      indicator.classList.toggle("bg-opacity-50", i !== index);
    });

    currentSlide = index;
  }

  function nextSlide() {
    const next = (currentSlide + 1) % totalSlides;
    showSlide(next);
  }

  function prevSlide() {
    const prev = (currentSlide - 1 + totalSlides) % totalSlides;
    showSlide(prev);
  }

  // Auto-play
  let autoPlayInterval = setInterval(nextSlide, 5000);

  // Event listeners
  document.getElementById("next-btn")?.addEventListener("click", () => {
    clearInterval(autoPlayInterval);
    nextSlide();
    autoPlayInterval = setInterval(nextSlide, 5000);
  });

  document.getElementById("prev-btn")?.addEventListener("click", () => {
    clearInterval(autoPlayInterval);
    prevSlide();
    autoPlayInterval = setInterval(nextSlide, 5000);
  });

  indicators.forEach((indicator: Element, index: number) => {
    indicator.addEventListener("click", () => {
      clearInterval(autoPlayInterval);
      showSlide(index);
      autoPlayInterval = setInterval(nextSlide, 5000);
    });
  });
</script>

<style>
  .text-shadow {
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  }
</style>
